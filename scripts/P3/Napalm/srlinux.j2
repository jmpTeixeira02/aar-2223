{
    "interface": [
        {% for n in range (4) %}
        {
            "name": "{{ interface.name }}{{ n+1 }}",
            "admin-state": "enable",
            "subinterface": [{
                "index": "1",
                "ipv4": {
                    "address": [
                        {
                            {% if n+1 == interface.number %}
                                "ip-prefix": "192.168.{{ interface.number }}.254/24"
                            {% else %}
                                "ip-prefix": "172.16.{{ n+1 }}{{ interface.number }}.{{ interface.number }}/24"
                            {% endif %}
                        }
                    ]
                }
            }]
        },
        {% endfor %}
        {
            "name": "lo0",
            {# "loopback-mode": "true", #}
            "subinterface": [{
                "index": "1",
                "ipv4": {
                    "address": [
                        {
                            "ip-prefix": "172.16.0.{{ interface.number }}/32"
                        }
                    ]
                }
            }]
        }
    ],
    "network-instance" : {
        "name": "default",
        "admin-state": "enable",
        "interface": [
            {% for n in range (4) %}
            {
                "name": "{{ interface.name }}{{ n+1 }}.1"
            }{% if n+1 != 4 %}, {% endif %}
            {% endfor %}
        ],
        "protocols": {
            "ospf": {
                "instance": {
                    "name": "default",
                    "version": "ospf-v2",
                    "router-id": "{{ interface.number }}.{{ interface.number }}.{{ interface.number }}.{{ interface.number }}",
                    "area": [
                        {
                            "area-id": "0.0.0.0",
                            "interface": [
                                {% for n in range (4) %}
                                    {% if n+1 != interface.number %}
                                    {
                                        "interface-name": "{{ interface.name }}{{ n+1 }}.1",
                                        "interface-type": "broadcast"
                                    } {% if n+1 != 4 %}, {% endif %}
                                    {% endif %}
                                {% endfor %}
                            ]
                        },
                        {
                            "area-id": "{{ interface.number }}.{{ interface.number }}.{{ interface.number }}.{{ interface.number }}",
                            "interface":[
                                {% for n in range (4) %}
                                    {% if n+1 == interface.number %}
                                    {
                                        "interface-name": "{{ interface.name }}{{ n+1 }}.1",
                                        "interface-type": "broadcast"
                                    }
                                    {% endif %}
                                {% endfor %}
                            ]
                        }
                    ]
                }
            }
        }
    }
}